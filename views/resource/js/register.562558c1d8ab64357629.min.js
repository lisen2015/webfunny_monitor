!function(e){function t(t){for(var n,s,i=t[0],c=t[1],u=t[2],p=0,g=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&g.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(t);g.length;)g.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={14:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([1041,0]),r()}({1027:function(e,t,r){},1041:function(e,t,r){"use strict";r.r(t);var n=r(18),o=r.n(n),a=r(13),s=r.n(a),i=r(14),c=r.n(i),u=r(27),l=r.n(u),p=r(28),g=r.n(p),v=r(29),f=r.n(v),d=(r(1027),r(0)),h=r.n(d),y=r(19),m=r.n(y),w=r(37),b=r(8);r(11);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var S=function(e){function t(e){var r;return s()(this,t),(r=l()(this,g()(t).call(this,e))).initState={name:"",email:"",emailCode:"",password:""},r.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({emailCodeLoading:!1,timeCount:0},r.initState),r.sendAble=!0,r.registerAble=!0,r}return f()(t,e),c()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,r=t.name,n=t.email,o=t.emailCode,a=t.password,s=t.timeCount;return h.a.createElement("div",{className:"register-container"},h.a.createElement("header",null,h.a.createElement("span",{className:"home-icon",onClick:function(){window.location.href="./home.html"}},h.a.createElement("b",null,"WEB"),h.a.createElement("label",null,"funny.cn"))),h.a.createElement("section",{className:"signup-content"},h.a.createElement("h1",null,"本地部署、注册账号"),h.a.createElement("h3",null,"使用本产品需要简单注册一下，用于统计用户，无任何安全相关问题，请放心注册。"),h.a.createElement("div",{className:"register account tab-pane fade in active",id:"signupByPhone"},h.a.createElement("div",{className:"input-set"},h.a.createElement("span",{className:"input-title"},"用户名（展示）"),h.a.createElement("input",{name:"name",type:"text",placeholder:"请输入用户名","data-growing-track":"true",value:r,onChange:function(t){e.setState({name:t.target.value})}}),h.a.createElement("span",{id:"emessage-name",className:"emessage"})),h.a.createElement("div",{className:"input-set phone"},h.a.createElement("span",{className:"input-title"},"邮箱（登录名、接收报警）"),h.a.createElement("input",{type:"email",placeholder:"请输入邮箱","data-growing-track":"true",maxLength:50,value:n,onChange:function(t){e.setState({email:t.target.value})}}),h.a.createElement("span",{id:"emessage-mobile",className:"emessage"})),h.a.createElement("div",{className:"input-set phone-verif"},h.a.createElement("span",{className:"input-title"},"邮箱验证码"),h.a.createElement("input",{name:"verifyCode",placeholder:"请输入邮箱验证码",style:{width:165},value:o,onChange:function(t){e.setState({emailCode:t.target.value})}}),h.a.createElement("button",{id:"captcha","data-button-clicked":"true",className:s>0?"captcha captcha-phone captcha-disable":"captcha captcha-phone",type:"button",onClick:this.getEmailCode.bind(this)},s>0?"重新发送(".concat(s,"s)"):"获取验证码"),h.a.createElement("span",{id:"emessage-verifyCode",className:"emessage"})),h.a.createElement("div",{className:"input-set phone"},h.a.createElement("span",{className:"input-title"},"登录密码"),h.a.createElement("input",{placeholder:"请输入密码","data-growing-track":"true",maxLength:30,value:a,onChange:function(t){e.setState({password:t.target.value})}}),h.a.createElement("span",{id:"emessage-pwd",className:"emessage"})),h.a.createElement("button",{className:"active login-btn",onClick:this.register.bind(this)},"开启前端监控"),h.a.createElement("span",{className:"form-other"},"已有账号？去 ",h.a.createElement("a",{className:"login-a",href:"./login.html"},"登录")))))}},{key:"getEmailCode",value:function(){var e=this,t=this.state.email;if(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t)){if(this.sendAble){this.sendAble=!1;var r,n,o=120,a=setInterval((function(){0===o&&(clearInterval(a),e.sendAble=!0),e.setState({timeCount:o}),o--}),1e3);r={email:t},n=function(e){console.log(e)},b.a.ajax("post","http://182.61.34.125:8020/webfunny/member/vcode",r,(function(e){n(e.data)}))}}else w.a.error("请输入正确的邮箱地址！")}},{key:"register",value:function(){var e=this;if(this.registerAble){var t,r,n,o=this.state,a=o.name,s=o.email,i=o.emailCode,c=o.password;if(a)if(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(s))if(i)if(c)this.registerAble=!1,t={name:a,email:s,emailCode:i,password:c},r=function(){w.a.success("注册成功！即将跳转到登录页"),setTimeout((function(){window.location.href="./login.html?userEmail="+s+"&password="+c}),2e3)},n=function(t){w.a.error(t),e.registerAble=!0},b.a.ajax("post","http://182.61.34.125:8020/webfunny/member/register",t,(function(e){r(e.data)}),(function(e){n(e)}));else w.a.error("请输入密码！");else w.a.error("请输入邮箱验证码！");else w.a.error("请输入正确的邮箱地址！");else w.a.error("请输入用户名！")}}},{key:"goLogin",value:function(){fetch("http://localhost:3000/api/v1/user/list",(function(){}))}}]),t}(d.Component);m.a.render(h.a.createElement(S,null),document.getElementById("app"))},11:function(e,t,r){"use strict";var n=r(18),o=r.n(n),a=r(34),s=r.n(a);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var c=s.a.getApiHost(),u=s.a.getWsApiHost(),l={jsList:"//www.webfunny.cn/webfunny/manifest.json",login:"//www.webfunny.cn/server/user/login",register:"//www.webfunny.cn/server/user",userList:c+"/server/user/list",projectList:c+"/server/project/list",projectDetail:c+"/server/project/detail",updateStartList:c+"/server/project/updateStartList",updateMonitorCode:c+"/server/project/updateMonitorCode",allProjectList:c+"/server/project/list/all",getProjectDetailList:c+"/server/project/detailList",getTodayFlowDataByTenMin:c+"/server/getTodayFlowDataByTenMin",getTodayFlowData:c+"/server/getTodayFlowData",getErrorInfo:c+"/server/getErrorInfo",getWarningMsg:c+"/server/getWarningMsg",getJsErrorCountByDay:c+"/server/getJavascriptErrorInfoListByDay",getConsoleErrorCountByDay:c+"/server/getConsoleErrorInfoListByDay",getJavascriptErrorCountListByHour:c+"/server/getJavascriptErrorCountListByHour",getJsErrorCountByHour:c+"/server/getJsErrorCountByHour",getJsConsoleErrorCountByHour:c+"/server/getJavascriptConsoleErrorInfoListByHour",getJsErrorSort:c+"/server/getJavascriptErrorSort",getJsErrorSortInfo:c+"/server/getJavascriptErrorSortInfo",getConsoleErrorSort:c+"/server/getConsoleErrorSort",getJavascriptErrorCountByOs:c+"/server/getJavascriptErrorCountByOs",getJavascriptErrorCountByType:c+"/server/getJavascriptErrorCountByType",getJavascriptErrorListByMsg:c+"/server/getJavascriptErrorListByMsg",getJavascriptErrorAboutInfo:c+"/server/getJavascriptErrorAboutInfo",getJavascriptErrorDetail:function(e){return c+"/server/javascriptErrorInfo/"+e},getJavascriptErrorStackCode:c+"/server/getJavascriptErrorStackCode",getJavascriptErrorListByPage:c+"/server/getJavascriptErrorListByPage",setIgnoreJavascriptError:c+"/server/ignoreError",ignoreErrorByApplication:c+"/server/ignoreErrorByApplication",searchUserBehaviors:c+"/server/searchCustomerBehaviors",searchCustomerInfo:c+"/server/searchCustomerInfo",searchUserBehaviorsForExample:c+"/server/searchUserBehaviorsForExample",searchCustomerInfoForExample:c+"/server/searchCustomerInfoForExample",getScreenShotInfoListByPage:c+"/server/getScreenShotInfoListByPage",getCustomerCountByTime:c+"/server/getCustomerCountByTime",getPageLoadTimeByDate:c+"/server/getPageLoadTimeByDate",getResourceLoadInfoListByDay:c+"/server/getResourceLoadInfoListByDay",getResourceErrorCountByDay:c+"/server/getResourceErrorCountByDay",getResourceErrorCountByHour:c+"/server/getResourceErrorCountByHour",getHttpErrorCountByHour:c+"/server/getHttpErrorCountByHour",getHttpErrorCountByDay:c+"/server/getHttpErrorCountByDay",getHttpErrorListByDay:c+"/server/getHttpErrorListByDay",getHttpErrorListByUrl:c+"/server/getHttpErrorListByUrl",getHttpCountForLoadTimeGroupByDay:c+"/server/getHttpCountForLoadTimeGroupByDay",getHttpUrlListForLoadTime:c+"/server/getHttpUrlListForLoadTime",getHttpUrlUserCount:c+"/server/getHttpUrlUserCount",getHttpUrlCountListByHour:c+"/server/getHttpUrlCountListByHour",getHttpUrlCountForHourByMinutes:c+"/server/getHttpUrlCountForHourByMinutes",getPvCountByHour:c+"/server/getPvCountByHour",getNewCustomerCountByHour:c+"/server/getNewCustomerCountByHour",getInstallCountByHour:c+"/server/getInstallCountByHour",getUvCountByHour:c+"/server/getUvCountByHour",getUserCountByHour:c+"/server/getUserCountByHour",getVersionCountOrderByCount:c+"/server/getVersionCountOrderByCount",getCityCountOrderByCount:c+"/server/getCityCountOrderByCount",getDeviceCountOrderByCount:c+"/server/getDeviceCountOrderByCount",getProvinceCountBySeconds:c+"/server/getProvinceCountBySeconds",getPvCountBySecond:c+"/server/getPvUvCountBySecond",getPvCountByMinute:c+"/server/getPvCountByMinute",getHttpCountByMinute:c+"/server/getHttpCountByMinute",getJavascriptErrorCountByMinute:c+"/server/getJavascriptErrorCountByMinute",getPvListByPage:c+"/server/getPvListByPage",getSevenDaysLeftCount:c+"/server/getSevenDaysLeftCount",getVideosEvent:c+"/server/getVideosEvent",createConfig:c+"/server/createConfig",createNewProject:c+"/server/createNewProject",checkProjectCount:c+"/server/checkProjectCount",deleteProject:c+"/server/deleteProject",sendEmailCode:"//www.webfunny.cn/server/sendEmailCode",getPurchaseCodeDetail:"//www.webfunny.cn/server/getPurchaseCodeDetail",connectUser:c+"/server/connectUser",connectUserRecord:c+"/server/connectUserRecord",getDebugInfoForLocalInfo:c+"/server/getDebugInfoForLocalInfo",getDebugInfoForVideo:c+"/server/getDebugInfoForVideo",mysqlStatus:c+"/server/mysqlStatus",getSysInfo:c+"/server/getSysInfo",testBehaviors:c+"/server/testBehaviors"},p={wsGetProvinceCountBySeconds:u+"/socket/wsGetProvinceCountBySeconds",wsGetDebugInfo:u+"/socket/wsGetDebugInfo"};t.a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l,{},{},{},p)},34:function(e,t){var r={local:{apiServerUrl:"http://localhost:8011",nodeApiServerUrl:"http://localhost:8011",uri:"//localhost",wsApiServerUrl:("http:"===window.location.protocol?"ws://":"wss://")+"localhost:8011"},dev:{apiServerUrl:"https://www.webfunny.cn",nodeApiServerUrl:"https://www.webfunny.cn",assetsUrl:"https://local.webfunny.cn",uri:"https://local.webfunny.cn:9100"},backup:{apiServerUrl:"http://www.webfunny.cn",nodeApiServerUrl:"http://www.webfunny.cn",assetsUrl:"",uri:""},qa:{apiServerUrl:"https://www.webfunny.cn",assetsUrl:"https://www.webfunny.cn",nodeApiServerUrl:"https://www.webfunny.cn",uri:"https://www.webfunny.cn"},publish:{apiServerUrl:"default_api_server_url",nodeApiServerUrl:"default_api_server_url",assetsUrl:"default_assets_url",uri:"default_assets_url",wsApiServerUrl:("http:"===window.location.protocol?"ws:":"wss:")+"default_api_server_url"},demo:{apiServerUrl:"http://47.105.132.73:8011",assetsUrl:"http://47.105.132.73:8011",nodeApiServerUrl:"http://47.105.132.73:8011",uri:"http://47.105.132.73:8011",wsApiServerUrl:("http:"===window.location.protocol?"ws://":"wss://")+"47.105.132.73:8011"},prod:{apiServerUrl:"http://www.webfunny.cn",assetsUrl:"http://www.webfunny.cn",nodeApiServerUrl:"http://www.webfunny.cn",uri:"http://www.webfunny.cn",wsApiServerUrl:("http:"===window.location.protocol?"ws://":"wss://")+"www.webfunny.cn"}};e.exports={getApiHost:function(){return r.publish.apiServerUrl},getNodeApiHost:function(){return r.publish.nodeApiServerUrl},getAssetsUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publish",t=arguments.length>1?arguments[1]:void 0,n=r[e].assetsUrl||"",o="local"===e?"/webfunny/":t;return n+o},getUri:function(){return r.publish.uri},getWsApiHost:function(){return r.publish.wsApiServerUrl}}},50:function(e,t){if(String.prototype.format||(String.prototype.format=function(){var e=this,t=Array.prototype.slice.call(arguments);return e.replace(/(\{(\d+)\})/g,(function(e,r,n){return void 0===t[n]?e:t[n]}))}),!String.prototype.trim){var r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(r,"")}}Date.prototype.Format||(Date.prototype.Format=function(e){var t=e,r={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return t}),Number.prototype.toFixed=function(e){var t=Math.pow(10,e),r=this*t+.5;return(r=parseInt(r,10)/t)+""}},6:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(45),o=r.n(n),a=r(13),s=r.n(a),i=r(14),c=r.n(i),u=function(){function e(){s()(this,e)}return c()(e,null,[{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"randomNumber",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"b64EncodeUnicode",value:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}},{key:"b64DecodeUnicode",value:function(t){try{return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(r){return e.b64DecodeUnicodeWithSpace(t)}}},{key:"b64DecodeUnicodeWithSpace",value:function(e){if(!e)return"";var t="";try{return t=e.replace(/ /g,"+"),decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(e){return t}}},{key:"b64DecodeUnicodeBehavior",value:function(e){if(!e)return"";var t=e.replace(/ /g,"+");try{return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(t){return e}}},{key:"qs",value:function(t,r){var n=[];return function t(r,a){var s=function(o){if(!r.hasOwnProperty(o))return{v:void 0};var s=r[o];e.isArray(s)?s.forEach((function(e){n.push(encodeURIComponent((a?a+".":"")+o+"[]")+"="+encodeURIComponent(e||""))})):e.isObject(s)?t(s,a?a+"."+o:o):n.push(encodeURIComponent((a?a+".":"")+o)+"="+encodeURIComponent(s||""))};for(var i in r){var c=s(i);if("object"===o()(c))return c.v}}(t,""),r&&!t._&&n.push("_="+encodeURIComponent(BUILD_NO)),n.length?"?"+n.join("&"):""}},{key:"parseQs",value:function(){var e=window.location.search,t=e.indexOf("?"),r={};return-1===t?r:(e.substr(t+1).split("&").forEach((function(e){var t=e.split("="),n=decodeURIComponent(t[0]),o=decodeURIComponent(t[1]||""),a=0,s=n.split("."),i=s.length;n=s[i-1];var c=r;if(i>1)for(;a<i-1;a++)c[s[a]]&&CommonTool.isObject(c[s[a]])||(c[s[a]]={}),c=c[s[a]];"[]"!==n.substr(-2)?c[n]=o:c[n=n.substr(0,n.length-2)]?c[n].push(o):c[n]=[o]})),r)}},{key:"quickSort",value:function(t){if(t.length<=1)return t;for(var r=Math.floor(t.length/2),n=t.splice(r,1)[0],o=[],a=[],s=0;s<t.length;s++)t[s]<=n?o.push(t[s]):a.push(t[s]);return e.quickSort(o).concat([n],e.quickSort(a))}},{key:"showLoading",value:function(){}},{key:"get24HoursArray",value:function(){for(var e=(new Date).getTime(),t=[],r=0;r<24;r++){var n=new Date(e-60*r*60*1e3).Format("MM-dd hh");t.push(n)}return t}},{key:"getHoursArrayByTimeSize",value:function(e){for(var t=(new Date).getTime(),r=[],n=0;n<e;n++){var o=new Date(t-60*n*60*1e3).Format("MM-dd hh");r.push(o)}return r}},{key:"getSevenDaysAgoHoursArrayByTimeSize",value:function(e){for(var t=(new Date).getTime()-6048e5,r=[],n=0;n<e;n++){var o=new Date(t-60*n*60*1e3).Format("MM-dd hh");r.push(o)}return r}},{key:"getSevenDaysAgo24HoursArray",value:function(){for(var e=(new Date).getTime()-6048e5,t=[],r=0;r<24;r++){var n=new Date(e-60*r*60*1e3).Format("MM-dd hh");t.push(n)}return t}},{key:"loadJs",value:function(e,t){var r=document.createElement("script");r.async=1,r.onload="function"==typeof t?t:function(){},r.src=e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(r,n)}},{key:"deepCopy",value:function(e){if(e instanceof Array){for(var t=[],r=0;r<e.length;++r)t[r]=this.deepCopy(e[r]);return t}if(e instanceof Object){var n={};for(var o in e)n[o]=this.deepCopy(e[o]);return n}return e}},{key:"addDays",value:function(e){var t="",r=new Date,n=new Date(r.getTime()+24*e*60*60*1e3),o=n.getFullYear(),a=n.getMonth()+1,s=n.getDate();return t=o+"-",t=a>=10?t+a+"-":t+"0"+a+"-",s>=10?t+=s:t=t+"0"+s,t}},{key:"toFixed",value:function(e,t){var r=e,n=Math.pow(10,t);if(r<0)return r=Math.abs(r),-(parseInt(r*n+.5,10)/n);var o=parseInt(r*n+.5,10)/n,a=o,s=o+"";if(-1!==s.indexOf(".")){var i=s.split(".")[0],c=s.split(".")[1];c.length>t&&(c=c.substring(0,2)),a=i+"."+c}return a}},{key:"getCookie",value:function(e){var t,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return document.cookie.match(r)?(t=document.cookie.match(r),unescape(t[2])):""}},{key:"setCookie",value:function(e,t,r){var n=new Date;n.setTime(n.getTime()+r);var o=window.location.hostname;document.cookie=e+"="+t+";Path=/;domain="+o+";expires="+n.toGMTString()}},{key:"removeDuplicateForString",value:function(e){var t=e.split(""),r=new Set(t);return Array.from(r).join("")}},{key:"quickSortForObject",value:function(t,r,n,o){if(!(n>o)){for(var a=t[n][r],s=t[n],i=n,c=o;i!==c;){for(;t[c][r]>=a&&c>i;)c--;for(;t[i][r]<=a&&c>i;)i++;if(c>i){var u=t[i];t[i]=t[c],t[c]=u}}t[n]=t[i],t[i]=s,e.quickSortForObject(t,r,n,i-1),e.quickSortForObject(t,r,i+1,o)}}}]),e}()},8:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return p}));var n=r(18),o=r.n(n),a=r(13),s=r.n(a),i=r(14),c=r.n(i),u=r(6);r(202),r(50);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var p=function(){function t(){s()(this,t)}return c()(t,null,[{key:"get",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},o="GET";r.webMonitorId||(r.webMonitorId=window.localStorage.chooseWebMonitorId);var a=e+u.a.qs(r),s=Object.assign({},{method:o},this.getHeaders());return t.handleFetchData(a,s,n)}},{key:"post",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},o="POST";r.webMonitorId||(r.webMonitorId=window.localStorage.chooseWebMonitorId);var a=JSON.stringify(r),s=Object.assign({},{method:o,body:a},this.getHeaders());return t.handleFetchData(e,s,n)}},{key:"put",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isHandleResult:!0,isShowLoading:!0},o="PUT";r.webMonitorId=window.localStorage.chooseWebMonitorId;var a=JSON.stringify(r),s=Object.assign({},{method:o,body:a},this.getHeaders());return t.handleFetchData(e,s,n)}},{key:"handleFetchData",value:function(e,r,n){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);a.body&&a.body.length>1024&&(a.body=a.body.substr(0,1024)+"...");var s=n.isShowLoading;if(s&&t.showLoading(),n.isFetched=!1,n.isAbort=!1,n.hasOwnProperty("customHead")){var i=n.customHead;r.headers=Object.assign({},r.headers,i)}var c=new Promise((function(o,a){fetch(e,r).then((function(e){n.isAbort||(s&&t.hideLoading(),n.isFetched=!0,e.json().then((function(r){if(e.ok)r.status?a(t.handleResult(r,n)):o(t.handleResult(r,n));else{var s="当前服务繁忙，请稍后再试";404===e.status&&(s="您访问的内容走丢了…"),console.error(s),a(t.handleResult({fetchStatus:"error",netStatus:e.status},n))}})).catch((function(r){var o=r.name+" "+r.message;a(t.handleResult({fetchStatus:"error",error:o,netStatus:e.status},n))})))})).catch((function(e){var r=e.name+" "+e.message;n.isAbort||(s&&t.hideLoading(),n.isFetched=!0,!0===n.isHandleResult&&console.error("网络开小差了，稍后再试吧",2),a(t.handleResult({fetchStatus:"error",error:r},n)))}))}));return Promise.race([c,t.fetchTimeout(n)])}},{key:"handleResult",value:function(e,t){if(e.status&&!0===t.isHandleResult){var r=e.msg||e.message||"服务器开小差了，稍后再试吧";console.error("".concat(r,"（").concat(e.status,"）"),2)}return e}},{key:"fetchTimeout",value:function(e){var r=e.isShowLoading;return new Promise((function(n,o){setTimeout((function(){e.isFetched||(e.isAbort=!0,r&&t.hideLoading(),console.error("网络开小差了，稍后再试吧",2),o({fetchStatus:"timeout"}))}),e.timeout||3e5)}))}},{key:"getHeaders",value:function(){return Object.assign({},{},{headers:{}})}},{key:"showLoading",value:function(){}},{key:"hideLoading",value:function(){}},{key:"wsGet",value:function(e,t,r,n,o,a){if(window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket){var s=new WebSocket(e);s.onmessage=function(e){r&&r(e)},s.onopen=function(r){console.log(e+" 连接成功"),n&&n(r),t&&t(s)},s.onclose=function(t){o&&o(t),s.close(),s=null,console.log(e+" 断开连接")},s.onerror=function(e){console.log(e),a&&a(e)}}else console.error("错误: 浏览器不支持websocket")}},{key:"ajax",value:function(t,r,n,o,a){var s={url:r,type:t,data:JSON.stringify(n),Accept:"*/*",contentType:"application/json;charset=utf-8",dataType:"json",traditional:!0,timeout:1e4,success:function(e,t,r){if(e.code){var n=e.msg||"服务器开小差了，稍后再试吧";return a&&"function"==typeof a&&a(n),void console.error(n)}try{o(e,r)}catch(e){console.error(e)}},error:function(e,t){var r,n="服务繁忙，稍后再试吧";switch(e.status){case 404:n="您访问的内容走丢了…";break;default:switch(t){case"timeout":n="网络开小差了，稍后再试吧";break;case"abort":n="服务繁忙，休息一下再说吧";break;case"error":n="当前服务繁忙，请稍后再试";break;default:n=(r=e.responseText?JSON.parse(e.responseText):{}).msg||(r.error||{}).message||"服务繁忙，稍后再试吧"}}a&&"function"==typeof a&&a(n),console.error(n)}};e.ajax(s)}},{key:"getApiDataFromCache",value:function(e){return"caches"in window?(console.log(window.caches),caches.match(e).then((function(e){return console.log(3,e),e?e.json():null}))):Promise.resolve()}}]),t}()}).call(this,r(25))}});